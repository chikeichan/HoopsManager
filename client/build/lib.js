(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
!function(){"use strict";function t(t){var e=new XMLHttpRequest,n=l();t.encode&&(t.url+=encodeURI(t.encode(t.payload))),e.open(t.type.toUpperCase(),t.url),e.setRequestHeader("Content-Type",t.contentType);for(var i in t.headers)e.setRequestHeader(i,t.headers[i]);return e.onload=function(){e.status>=200&&e.status<=299?n.resolve(e.responseText):n.reject(e.responseText)},t.encode?e.send():e.send(JSON.stringify(t.payload)),n.promise}function e(t,e){e=e||{};for(var n in e)t[n]||(t[n]=e[n]);return t}function n(t){var e=this._constructor;if(e){var n={},i=function(){for(var t in n)this[t]=n[t];e.apply(this,arguments)},r={};for(var o in e.prototype)Object.prototype.hasOwnProperty.call(e.prototype,o)&&(r[o]=e.prototype[o]);for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){var a=t[s];"function"==typeof a?r[s]=t[s]:n[s]=t[s]}return i.prototype=Object.create(r),i}}function i(t){var e=1;return function(){var n=t+e;return e++,n}}function r(t){for(var e in t){var n=e.split(" "),i=n[0],r=this.shadowRoot.querySelector(n[1]),o=t[e],s=this[o]=this[o].bind(this);r.addEventListener(i,s)}}function o(t){for(var e in t)switch(e){case"exends":break;case"onCreate":break;case"onDetach":break;case"onAttributesChange":break;case"onAttach":break;case"tagName":break;case"fragment":break;case"style":break;case"events":break;default:this[e]=t[e]}}function s(){return this._currentState[this._currentState.length-1]}function a(t,e){return!!t.className.match(new RegExp("(\\s|^)"+e+"(\\s|$)"))}function u(t){return t=t.replace(/[.#]/,function(t){return","+t+","}).split(",")}function c(t,e){switch(typeof e){case"function":return e.apply(this,arguments);case"string":return e}}var p={},h={},f={},l=function(){function t(){function e(t){u=t,v=h,c?s(c):o(d)}function n(t){u=t,v=f,l?a(l):o(d)}function i(e){return y=t(),s(e),{then:y.then,"catch":y["catch"],done:y.done}}function r(t){o(t)}function o(t){if(v===p&&(d=t),v===h&&"function"==typeof t)return t.call(this,u);if(v===f)throw u}function s(t){if(v===p&&(c=t),v===h){if(u&&"function"==typeof u.then)return void u.then(e);try{u=t.call(this,u),y&&y.resolve(u)}catch(n){u=n,y&&y.reject(u)}}}function a(t){if(v===p&&(l=t),v===f)try{u=t.call(this,u),y&&y.resolve(u)}catch(e){u=e,y&&y.reject(u)}}var u,c,l,d,y,v=p;return{resolve:e,reject:n,then:i,"catch":function(e){return y=t(),a(e),{then:y.then,"catch":y["catch"],done:y.done}},done:r}}var e={},n=t();return e.resolve=n.resolve,e.reject=n.reject,e.promise={then:n.then,"catch":n["catch"],done:n.done},e},d=function(){};d.prototype.register=function(t){var e={};return function(n){var i={};return i.subscribe=function(i,r){n._subscribe(i,r,t,e)},i.publish=function(t,i,r){n._publish(t,i,r,e)},i.unsubscribe=function(i,r){n._unsubscribe(i,r,t,e)},i.unsubscribeAll=function(i){n._unsubscribeAll(i,t,e)},i}(this)},d.prototype._subscribe=function(t,e,n,i){if(i[t]||(i[t]={}),i[t][n]||(i[t][n]=[]),"function"!=typeof e)throw new Error("A callback function must be passed in to subscribe");i[t][n].push(e)},d.prototype._publish=function(t,e,n,i){function r(t,e){return function(n){n.call(this,t,e)}}e=e||null,n=n||null;var o=i[t];if(o)for(var s in o){var a=o[s];Array.isArray(a)&&a.forEach(r.call(this,e,n))}},d.prototype._unsubscribe=function(t,e,n,i){var r=i[t];if(r){var o=r[n];o.forEach(function(t,n){return t===e?void o.splice(n,1):void 0}.bind(this))}},d.prototype._unsubscribeAll=function(t,e,n){function i(t){var i=n[t];i&&i[e]&&delete i[e]}if(t)return void i(t);for(var r in n)i(r)};var y={},v=i("factory");y._constructor=function(t){this._initialize(t)},y._constructor.prototype._initialize=function(t){var n={};t=t||{},this.uuid=v(),this.resources={},this.eventBus=t.eventBus||new d,this.eventBus=this.eventBus.register(this.uuid),this.set=function(t,e){this._set(t,e,n)},this.unset=function(t){this._unset(t,n)},this.get=function(t){return this._get(t,n)},this.clone=function(){return JSON.parse(JSON.stringify(n))},"function"==typeof this.initialize&&this.initialize.apply(this,arguments),this.set(e(t,this.defaults)),this.eventBus.publish("initialize",this,t)},y._constructor.prototype._set=function(t,e,n){if("object"==typeof t&&!Array.isArray(t))for(var i in t)this._set(i,t[i],n);if("string"==typeof t){n[t]=e;var r={};r[t]=e,this.eventBus.publish("change",this,r),this.eventBus.publish("change:"+t,this,e)}},y._constructor.prototype._get=function(t,e){return"string"==typeof t?e[t]:"undefined"==typeof t?e:void 0},y._constructor.prototype._unset=function(t,e){if("string"==typeof t){var n={};n[t]=e[t],delete e[t],this.eventBus.publish("delete",this,n),this.eventBus.publish("delete:"+t,this,n[t])}else if("undefined"==typeof t)for(var i in e)this._unset(i,e)},y._constructor.prototype.sync=function(t,e){this.resources[t]=t,t.eventBus.subscribe("change:"+e,function(t,e){for(var n in e)this.set(n,e[n])}.bind(this)),t.eventBus.subscribe("delete:"+e,function(t,e){this.unset()}.bind(this))},y.extend=n;var b=i("service"),g={};g._constructor=function(t){this._initialize(t)},g._constructor.prototype._initialize=function(t){this.uuid=b(),"function"==typeof this.initialize&&this.initialize.apply(this,arguments)},g._constructor.prototype.subscribeAll=function(t,e){for(var n in e){var i=e[n],r=this[i]=this[i].bind(this);t.eventBus.subscribe(n,r)}},g.extend=n;var m=i("component"),_={},C={};C.register=function(t){if(_[t.tagName])return _[t.tagName];var e={},n=Object.create(HTMLElement.prototype);return o.call(n,t),n.createdCallback=function(){var e=this.createShadowRoot();e.appendChild(t.fragment.cloneNode(!0)),this.uuid=m(),t.style&&e.appendChild(t.style.cloneNode(!0)),t.onCreate&&t.onCreate.apply(this,arguments)},n.attachedCallback=function(){t.onAttach&&t.onAttach.apply(this,arguments),r.call(this,t.events)},n.detachedCallback=function(){t.onDetach&&t.onDetach.apply(this,arguments)},n.attributeChangedCallback=function(e,n,i){t.onAttributesChange&&t.onAttributesChange[e].apply(this,[n,i])},e.prototype=n,t["extends"]&&(e["extends"]=t["extends"]),_[t.tagName]=document.registerElement(t.tagName,e),_[t.tagName]},C.extend=function(t,e){var n=_[t],i={},s=Object.create(HTMLElement.prototype);return o.call(s,e),s.createdCallback=function(){n.prototype.createdCallback.apply(this,arguments),e.onCreate&&e.onCreate.apply(this,arguments)},s.attachedCallback=function(){n.prototype.attachedCallback.apply(this,arguments),e.onAttach&&e.onAttach.apply(this,arguments),r.call(this,e.events)},s.detachedCallback=function(){n.prototype.detachedCallback.apply(this,arguments),e.onDetach&&e.onDetach.apply(this,arguments)},s.attributeChangedCallback=function(t,i,r){n.prototype.attributeChangedCallback.apply(this,arguments),e.onAttributesChange&&e.onAttributesChange[t].apply(this,[i,r])},i.prototype=s,document.registerElement(e.tagName,i)};var w={},x={},E=function(){};E.prototype.stringify=function(t){var e="";for(var n in t){e+=n+"{";var i=t[n];for(var r in i){var o=i[r];e+=r+":"+o+";"}e=e.slice(0,e.length-1),e+="}"}return e},E.prototype.createStyleTag=function(t){var e=document.createElement("style");return t=this.stringify(t),e.innerText=t,e},E.prototype.registerMixins=function(t,e){w[t]=e},E.prototype.registerVariables=function(t,e){x[t]=e},E.prototype.getVariable=function(t){return x[t]?x[t]:void console.error("Variable "+t+" does not exist.")},E.prototype.toHex=function(t){function e(t){var e=t.toString(16);return 1==e.length?"0"+e:e}return t=t.replace(" ","").split(","),"#"+e(t[0])+e(t[1])+e(t[2])},E.prototype.toRGB=function(t){var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?"rgb("+[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)].join(",")+")":null},E.prototype.toRGBa=function(t,e){var n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return n?"rgba("+[parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16),e].join(",")+")":null},E.prototype.getMixins=function(t){return w[t]?w[t]:void console.error("Mixin "+t+" does not exist.")};var k={},A=function(){};A.prototype["export"]=function(t,e){if("string"!=typeof t)throw new Error("Module name is not a string.");if("function"!=typeof e)throw new Error("Module is not a function.");k[t]=function(t){t(e())}},A.prototype["import"]=function(t){function e(r,s){var a=t[r];if("string"!=typeof r)throw new Error("Module name is not a string.");if("string"!=typeof a)throw new Error("URL is not a string.");var u=k[r];if(u)s.resolve(u());else{var c=document.createElement("script");c.type="text/javascript",c.src=a,c.onload=function(){var t=l();console.log("Loading "+r+"..."),t.promise.then(function(t){o[r]=t,n++,0===i.length?s.resolve(o):e(i.pop(),s)}),c.remove(),k[r](t.resolve)}.bind(this,r),document.body.appendChild(c)}}var n=0,i=Object.keys(t),r=l(),o={};return e(i.pop(),r),r.promise.and={},r.promise.and["export"]=function(t,e){k[t]=function(n){r.promise.then(function(n){return k[t]=e.bind(this,n),e.call(this,n)}.bind(this)).done(n)}}.bind(this),r.promise.and["import"]=function(t){return r.promise.then(this["import"].bind(this,t))}.bind(this),r.promise};var q=y.extend({ajax:function(e){function n(t){return"DELETE"===e.type.toUpperCase()?Array.isArray(t)?t.forEach(function(t){this.unset(t[e.indexBy],t)}.bind(this)):"object"==typeof t&&this.unset(t[e.indexBy],t):Array.isArray(t)?t.forEach(function(t){this.set(t[e.indexBy],t)}.bind(this)):"object"==typeof t&&this.set(t[e.indexBy],t),t}function i(t){return e.parse?e.parse(t):this.parse(t)}if(!e.url)throw new Error("Url is required.");if(!e.type)throw new Error("Request type is required.");return e.contentType=e.contentType||"application/json",e.encode=e.encode||null,e.payload=e.payload||null,e.indexBy=e.indexBy||"id",t(e).then(i.bind(this)).then(n.bind(this))},parse:function(t){return JSON.parse(t)}}),B={},j=function(){};j.prototype.register=function(t){if(B[t])throw new Error("Resource "+t+" already exist.");return B[t]=new q,B[t]},j.prototype.get=function(t){return B[t]?B[t]:this.register(t)};var N=function(){};N.prototype.createTemplate=function(){return new S};var S=function(){this._currentState=[],this._queue=[],this._conditional=void 0,this._state=void 0,this._loop=void 0,this._start=void 0};S.prototype.create=function(t){t=u(t);var e=function(){var e=document.createElement(t[0]);"."===t[1]?e.className=t[2]:"#"===t[1]&&(e.id=t[2]),this._currentState.push(e)}.bind(this);return this._queue.push({type:"open",fn:e}),this},S.prototype.addClass=function(t){var e=function(e){var n=s.call(this);t=c(e,t);var i=n.className.length>0?" ":"";a(n,t)||(n.className+=i+t)}.bind(this);return this._queue.push({type:"addClass",fn:e}),this},S.prototype.text=function(t){var e=function(e){var n=s.call(this);n.textContent=c(e,t)}.bind(this);return this._queue.push({type:"text",fn:e}),this},S.prototype.attr=function(t,e){var n=function(n){var i=s.call(this);i.setAttribute(c(n,t),c(n,e))}.bind(this);return this._queue.push({type:"attr",fn:n}),this},S.prototype.style=function(t,e){var n=function(n){var i=s.call(this);i.style[c(n,t)]=c(n,e)}.bind(this);return this._queue.push({type:"style",fn:n}),this},S.prototype.removeClass=function(t){var e=function(e){var n=s.call(this);if(t=c(e,t),a(n,t)){var i=new RegExp("(\\s|^)"+t+"(\\s|$)");n.className=n.className.replace(i," ")}}.bind(this);return this._queue.push({type:"removeClass",fn:e}),this},S.prototype.append=function(){var t=function(t){var e=this._currentState.pop();if(0===this._currentState.length)this.previousFragment.appendChild(e);else{var n=s.call(this);n.appendChild(e)}}.bind(this);return this._queue.push({type:"close",fn:t}),this},S.prototype.appendLast=function(){var t=function(t){var e=this._currentState.pop();this.previousFragment.appendChild(e)}.bind(this);return this._queue.push({type:"end",fn:t}),this},S.prototype["if"]=function(t){var e=function(e){this._state="conditional",t=c(e,t),this._conditional=!!t}.bind(this);return this._queue.push({type:"if",fn:e}),this},S.prototype["else"]=function(){var t=function(t){this._conditional=!this._conditional}.bind(this);return this._queue.push({type:"else",fn:t}),this},S.prototype.each=function(t){var e=function(e,n){this._loop=c(e,t),this._state="loop",this._start=n}.bind(this);return this._queue.push({type:"each",fn:e}),this},S.prototype.done=function(){var t=function(t,e){this._conditional=void 0,this._state=void 0}.bind(this);return this._queue.push({type:"done",fn:t}),this},S.prototype.render=function(t){return this.previousFragment=document.createDocumentFragment(),this._queue.forEach(function(e,n){switch(this._state){case"conditional":(this._conditional||"else"===e.type||"done"===e.type)&&e.fn(t,n);break;case"loop":"done"===e.type&&(this._loop.forEach(function(t,e){for(var i=this._start+1;n>i;i++){var r=this._queue[i];r.fn(t,e)}}.bind(this)),e.fn(t,n));break;default:e.fn(t,n)}}.bind(this)),this.previousFragment};var R=new d,T={Factory:y,Service:g,Component:C,Vow:l,Stylizer:new E,Renderer:new N,Module:new A,Resource:new j};T.registerGlobalEventBus=function(t){return R.register(t)},module&&module.exports?module.exports=T:window.Trio=T}();
},{}],2:[function(require,module,exports){
window.Trio = require('trio');
},{"trio":1}]},{},[2])
//# sourceMappingURL=data:application/json;charset:utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy93YXRjaGlmeS9ub2RlX21vZHVsZXMvYnJvd3NlcmlmeS9ub2RlX21vZHVsZXMvYnJvd3Nlci1wYWNrL19wcmVsdWRlLmpzIiwiLi4vVHJpbml0eUpTL2Rpc3QvdHJpby5taW4uanMiLCJjbGllbnQvc3JjL2xpYi5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQ0FBOztBQ0FBIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsIiFmdW5jdGlvbigpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIHQodCl7dmFyIGU9bmV3IFhNTEh0dHBSZXF1ZXN0LG49bCgpO3QuZW5jb2RlJiYodC51cmwrPWVuY29kZVVSSSh0LmVuY29kZSh0LnBheWxvYWQpKSksZS5vcGVuKHQudHlwZS50b1VwcGVyQ2FzZSgpLHQudXJsKSxlLnNldFJlcXVlc3RIZWFkZXIoXCJDb250ZW50LVR5cGVcIix0LmNvbnRlbnRUeXBlKTtmb3IodmFyIGkgaW4gdC5oZWFkZXJzKWUuc2V0UmVxdWVzdEhlYWRlcihpLHQuaGVhZGVyc1tpXSk7cmV0dXJuIGUub25sb2FkPWZ1bmN0aW9uKCl7ZS5zdGF0dXM+PTIwMCYmZS5zdGF0dXM8PTI5OT9uLnJlc29sdmUoZS5yZXNwb25zZVRleHQpOm4ucmVqZWN0KGUucmVzcG9uc2VUZXh0KX0sdC5lbmNvZGU/ZS5zZW5kKCk6ZS5zZW5kKEpTT04uc3RyaW5naWZ5KHQucGF5bG9hZCkpLG4ucHJvbWlzZX1mdW5jdGlvbiBlKHQsZSl7ZT1lfHx7fTtmb3IodmFyIG4gaW4gZSl0W25dfHwodFtuXT1lW25dKTtyZXR1cm4gdH1mdW5jdGlvbiBuKHQpe3ZhciBlPXRoaXMuX2NvbnN0cnVjdG9yO2lmKGUpe3ZhciBuPXt9LGk9ZnVuY3Rpb24oKXtmb3IodmFyIHQgaW4gbil0aGlzW3RdPW5bdF07ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LHI9e307Zm9yKHZhciBvIGluIGUucHJvdG90eXBlKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLnByb3RvdHlwZSxvKSYmKHJbb109ZS5wcm90b3R5cGVbb10pO2Zvcih2YXIgcyBpbiB0KWlmKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LHMpKXt2YXIgYT10W3NdO1wiZnVuY3Rpb25cIj09dHlwZW9mIGE/cltzXT10W3NdOm5bc109dFtzXX1yZXR1cm4gaS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShyKSxpfX1mdW5jdGlvbiBpKHQpe3ZhciBlPTE7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIG49dCtlO3JldHVybiBlKyssbn19ZnVuY3Rpb24gcih0KXtmb3IodmFyIGUgaW4gdCl7dmFyIG49ZS5zcGxpdChcIiBcIiksaT1uWzBdLHI9dGhpcy5zaGFkb3dSb290LnF1ZXJ5U2VsZWN0b3IoblsxXSksbz10W2VdLHM9dGhpc1tvXT10aGlzW29dLmJpbmQodGhpcyk7ci5hZGRFdmVudExpc3RlbmVyKGkscyl9fWZ1bmN0aW9uIG8odCl7Zm9yKHZhciBlIGluIHQpc3dpdGNoKGUpe2Nhc2VcImV4ZW5kc1wiOmJyZWFrO2Nhc2VcIm9uQ3JlYXRlXCI6YnJlYWs7Y2FzZVwib25EZXRhY2hcIjpicmVhaztjYXNlXCJvbkF0dHJpYnV0ZXNDaGFuZ2VcIjpicmVhaztjYXNlXCJvbkF0dGFjaFwiOmJyZWFrO2Nhc2VcInRhZ05hbWVcIjpicmVhaztjYXNlXCJmcmFnbWVudFwiOmJyZWFrO2Nhc2VcInN0eWxlXCI6YnJlYWs7Y2FzZVwiZXZlbnRzXCI6YnJlYWs7ZGVmYXVsdDp0aGlzW2VdPXRbZV19fWZ1bmN0aW9uIHMoKXtyZXR1cm4gdGhpcy5fY3VycmVudFN0YXRlW3RoaXMuX2N1cnJlbnRTdGF0ZS5sZW5ndGgtMV19ZnVuY3Rpb24gYSh0LGUpe3JldHVybiEhdC5jbGFzc05hbWUubWF0Y2gobmV3IFJlZ0V4cChcIihcXFxcc3xeKVwiK2UrXCIoXFxcXHN8JClcIikpfWZ1bmN0aW9uIHUodCl7cmV0dXJuIHQ9dC5yZXBsYWNlKC9bLiNdLyxmdW5jdGlvbih0KXtyZXR1cm5cIixcIit0K1wiLFwifSkuc3BsaXQoXCIsXCIpfWZ1bmN0aW9uIGModCxlKXtzd2l0Y2godHlwZW9mIGUpe2Nhc2VcImZ1bmN0aW9uXCI6cmV0dXJuIGUuYXBwbHkodGhpcyxhcmd1bWVudHMpO2Nhc2VcInN0cmluZ1wiOnJldHVybiBlfX12YXIgcD17fSxoPXt9LGY9e30sbD1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoKXtmdW5jdGlvbiBlKHQpe3U9dCx2PWgsYz9zKGMpOm8oZCl9ZnVuY3Rpb24gbih0KXt1PXQsdj1mLGw/YShsKTpvKGQpfWZ1bmN0aW9uIGkoZSl7cmV0dXJuIHk9dCgpLHMoZSkse3RoZW46eS50aGVuLFwiY2F0Y2hcIjp5W1wiY2F0Y2hcIl0sZG9uZTp5LmRvbmV9fWZ1bmN0aW9uIHIodCl7byh0KX1mdW5jdGlvbiBvKHQpe2lmKHY9PT1wJiYoZD10KSx2PT09aCYmXCJmdW5jdGlvblwiPT10eXBlb2YgdClyZXR1cm4gdC5jYWxsKHRoaXMsdSk7aWYodj09PWYpdGhyb3cgdX1mdW5jdGlvbiBzKHQpe2lmKHY9PT1wJiYoYz10KSx2PT09aCl7aWYodSYmXCJmdW5jdGlvblwiPT10eXBlb2YgdS50aGVuKXJldHVybiB2b2lkIHUudGhlbihlKTt0cnl7dT10LmNhbGwodGhpcyx1KSx5JiZ5LnJlc29sdmUodSl9Y2F0Y2gobil7dT1uLHkmJnkucmVqZWN0KHUpfX19ZnVuY3Rpb24gYSh0KXtpZih2PT09cCYmKGw9dCksdj09PWYpdHJ5e3U9dC5jYWxsKHRoaXMsdSkseSYmeS5yZXNvbHZlKHUpfWNhdGNoKGUpe3U9ZSx5JiZ5LnJlamVjdCh1KX19dmFyIHUsYyxsLGQseSx2PXA7cmV0dXJue3Jlc29sdmU6ZSxyZWplY3Q6bix0aGVuOmksXCJjYXRjaFwiOmZ1bmN0aW9uKGUpe3JldHVybiB5PXQoKSxhKGUpLHt0aGVuOnkudGhlbixcImNhdGNoXCI6eVtcImNhdGNoXCJdLGRvbmU6eS5kb25lfX0sZG9uZTpyfX12YXIgZT17fSxuPXQoKTtyZXR1cm4gZS5yZXNvbHZlPW4ucmVzb2x2ZSxlLnJlamVjdD1uLnJlamVjdCxlLnByb21pc2U9e3RoZW46bi50aGVuLFwiY2F0Y2hcIjpuW1wiY2F0Y2hcIl0sZG9uZTpuLmRvbmV9LGV9LGQ9ZnVuY3Rpb24oKXt9O2QucHJvdG90eXBlLnJlZ2lzdGVyPWZ1bmN0aW9uKHQpe3ZhciBlPXt9O3JldHVybiBmdW5jdGlvbihuKXt2YXIgaT17fTtyZXR1cm4gaS5zdWJzY3JpYmU9ZnVuY3Rpb24oaSxyKXtuLl9zdWJzY3JpYmUoaSxyLHQsZSl9LGkucHVibGlzaD1mdW5jdGlvbih0LGkscil7bi5fcHVibGlzaCh0LGkscixlKX0saS51bnN1YnNjcmliZT1mdW5jdGlvbihpLHIpe24uX3Vuc3Vic2NyaWJlKGkscix0LGUpfSxpLnVuc3Vic2NyaWJlQWxsPWZ1bmN0aW9uKGkpe24uX3Vuc3Vic2NyaWJlQWxsKGksdCxlKX0saX0odGhpcyl9LGQucHJvdG90eXBlLl9zdWJzY3JpYmU9ZnVuY3Rpb24odCxlLG4saSl7aWYoaVt0XXx8KGlbdF09e30pLGlbdF1bbl18fChpW3RdW25dPVtdKSxcImZ1bmN0aW9uXCIhPXR5cGVvZiBlKXRocm93IG5ldyBFcnJvcihcIkEgY2FsbGJhY2sgZnVuY3Rpb24gbXVzdCBiZSBwYXNzZWQgaW4gdG8gc3Vic2NyaWJlXCIpO2lbdF1bbl0ucHVzaChlKX0sZC5wcm90b3R5cGUuX3B1Ymxpc2g9ZnVuY3Rpb24odCxlLG4saSl7ZnVuY3Rpb24gcih0LGUpe3JldHVybiBmdW5jdGlvbihuKXtuLmNhbGwodGhpcyx0LGUpfX1lPWV8fG51bGwsbj1ufHxudWxsO3ZhciBvPWlbdF07aWYobylmb3IodmFyIHMgaW4gbyl7dmFyIGE9b1tzXTtBcnJheS5pc0FycmF5KGEpJiZhLmZvckVhY2goci5jYWxsKHRoaXMsZSxuKSl9fSxkLnByb3RvdHlwZS5fdW5zdWJzY3JpYmU9ZnVuY3Rpb24odCxlLG4saSl7dmFyIHI9aVt0XTtpZihyKXt2YXIgbz1yW25dO28uZm9yRWFjaChmdW5jdGlvbih0LG4pe3JldHVybiB0PT09ZT92b2lkIG8uc3BsaWNlKG4sMSk6dm9pZCAwfS5iaW5kKHRoaXMpKX19LGQucHJvdG90eXBlLl91bnN1YnNjcmliZUFsbD1mdW5jdGlvbih0LGUsbil7ZnVuY3Rpb24gaSh0KXt2YXIgaT1uW3RdO2kmJmlbZV0mJmRlbGV0ZSBpW2VdfWlmKHQpcmV0dXJuIHZvaWQgaSh0KTtmb3IodmFyIHIgaW4gbilpKHIpfTt2YXIgeT17fSx2PWkoXCJmYWN0b3J5XCIpO3kuX2NvbnN0cnVjdG9yPWZ1bmN0aW9uKHQpe3RoaXMuX2luaXRpYWxpemUodCl9LHkuX2NvbnN0cnVjdG9yLnByb3RvdHlwZS5faW5pdGlhbGl6ZT1mdW5jdGlvbih0KXt2YXIgbj17fTt0PXR8fHt9LHRoaXMudXVpZD12KCksdGhpcy5yZXNvdXJjZXM9e30sdGhpcy5ldmVudEJ1cz10LmV2ZW50QnVzfHxuZXcgZCx0aGlzLmV2ZW50QnVzPXRoaXMuZXZlbnRCdXMucmVnaXN0ZXIodGhpcy51dWlkKSx0aGlzLnNldD1mdW5jdGlvbih0LGUpe3RoaXMuX3NldCh0LGUsbil9LHRoaXMudW5zZXQ9ZnVuY3Rpb24odCl7dGhpcy5fdW5zZXQodCxuKX0sdGhpcy5nZXQ9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX2dldCh0LG4pfSx0aGlzLmNsb25lPWZ1bmN0aW9uKCl7cmV0dXJuIEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkobikpfSxcImZ1bmN0aW9uXCI9PXR5cGVvZiB0aGlzLmluaXRpYWxpemUmJnRoaXMuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyksdGhpcy5zZXQoZSh0LHRoaXMuZGVmYXVsdHMpKSx0aGlzLmV2ZW50QnVzLnB1Ymxpc2goXCJpbml0aWFsaXplXCIsdGhpcyx0KX0seS5fY29uc3RydWN0b3IucHJvdG90eXBlLl9zZXQ9ZnVuY3Rpb24odCxlLG4pe2lmKFwib2JqZWN0XCI9PXR5cGVvZiB0JiYhQXJyYXkuaXNBcnJheSh0KSlmb3IodmFyIGkgaW4gdCl0aGlzLl9zZXQoaSx0W2ldLG4pO2lmKFwic3RyaW5nXCI9PXR5cGVvZiB0KXtuW3RdPWU7dmFyIHI9e307clt0XT1lLHRoaXMuZXZlbnRCdXMucHVibGlzaChcImNoYW5nZVwiLHRoaXMsciksdGhpcy5ldmVudEJ1cy5wdWJsaXNoKFwiY2hhbmdlOlwiK3QsdGhpcyxlKX19LHkuX2NvbnN0cnVjdG9yLnByb3RvdHlwZS5fZ2V0PWZ1bmN0aW9uKHQsZSl7cmV0dXJuXCJzdHJpbmdcIj09dHlwZW9mIHQ/ZVt0XTpcInVuZGVmaW5lZFwiPT10eXBlb2YgdD9lOnZvaWQgMH0seS5fY29uc3RydWN0b3IucHJvdG90eXBlLl91bnNldD1mdW5jdGlvbih0LGUpe2lmKFwic3RyaW5nXCI9PXR5cGVvZiB0KXt2YXIgbj17fTtuW3RdPWVbdF0sZGVsZXRlIGVbdF0sdGhpcy5ldmVudEJ1cy5wdWJsaXNoKFwiZGVsZXRlXCIsdGhpcyxuKSx0aGlzLmV2ZW50QnVzLnB1Ymxpc2goXCJkZWxldGU6XCIrdCx0aGlzLG5bdF0pfWVsc2UgaWYoXCJ1bmRlZmluZWRcIj09dHlwZW9mIHQpZm9yKHZhciBpIGluIGUpdGhpcy5fdW5zZXQoaSxlKX0seS5fY29uc3RydWN0b3IucHJvdG90eXBlLnN5bmM9ZnVuY3Rpb24odCxlKXt0aGlzLnJlc291cmNlc1t0XT10LHQuZXZlbnRCdXMuc3Vic2NyaWJlKFwiY2hhbmdlOlwiK2UsZnVuY3Rpb24odCxlKXtmb3IodmFyIG4gaW4gZSl0aGlzLnNldChuLGVbbl0pfS5iaW5kKHRoaXMpKSx0LmV2ZW50QnVzLnN1YnNjcmliZShcImRlbGV0ZTpcIitlLGZ1bmN0aW9uKHQsZSl7dGhpcy51bnNldCgpfS5iaW5kKHRoaXMpKX0seS5leHRlbmQ9bjt2YXIgYj1pKFwic2VydmljZVwiKSxnPXt9O2cuX2NvbnN0cnVjdG9yPWZ1bmN0aW9uKHQpe3RoaXMuX2luaXRpYWxpemUodCl9LGcuX2NvbnN0cnVjdG9yLnByb3RvdHlwZS5faW5pdGlhbGl6ZT1mdW5jdGlvbih0KXt0aGlzLnV1aWQ9YigpLFwiZnVuY3Rpb25cIj09dHlwZW9mIHRoaXMuaW5pdGlhbGl6ZSYmdGhpcy5pbml0aWFsaXplLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sZy5fY29uc3RydWN0b3IucHJvdG90eXBlLnN1YnNjcmliZUFsbD1mdW5jdGlvbih0LGUpe2Zvcih2YXIgbiBpbiBlKXt2YXIgaT1lW25dLHI9dGhpc1tpXT10aGlzW2ldLmJpbmQodGhpcyk7dC5ldmVudEJ1cy5zdWJzY3JpYmUobixyKX19LGcuZXh0ZW5kPW47dmFyIG09aShcImNvbXBvbmVudFwiKSxfPXt9LEM9e307Qy5yZWdpc3Rlcj1mdW5jdGlvbih0KXtpZihfW3QudGFnTmFtZV0pcmV0dXJuIF9bdC50YWdOYW1lXTt2YXIgZT17fSxuPU9iamVjdC5jcmVhdGUoSFRNTEVsZW1lbnQucHJvdG90eXBlKTtyZXR1cm4gby5jYWxsKG4sdCksbi5jcmVhdGVkQ2FsbGJhY2s9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmNyZWF0ZVNoYWRvd1Jvb3QoKTtlLmFwcGVuZENoaWxkKHQuZnJhZ21lbnQuY2xvbmVOb2RlKCEwKSksdGhpcy51dWlkPW0oKSx0LnN0eWxlJiZlLmFwcGVuZENoaWxkKHQuc3R5bGUuY2xvbmVOb2RlKCEwKSksdC5vbkNyZWF0ZSYmdC5vbkNyZWF0ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LG4uYXR0YWNoZWRDYWxsYmFjaz1mdW5jdGlvbigpe3Qub25BdHRhY2gmJnQub25BdHRhY2guYXBwbHkodGhpcyxhcmd1bWVudHMpLHIuY2FsbCh0aGlzLHQuZXZlbnRzKX0sbi5kZXRhY2hlZENhbGxiYWNrPWZ1bmN0aW9uKCl7dC5vbkRldGFjaCYmdC5vbkRldGFjaC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LG4uYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrPWZ1bmN0aW9uKGUsbixpKXt0Lm9uQXR0cmlidXRlc0NoYW5nZSYmdC5vbkF0dHJpYnV0ZXNDaGFuZ2VbZV0uYXBwbHkodGhpcyxbbixpXSl9LGUucHJvdG90eXBlPW4sdFtcImV4dGVuZHNcIl0mJihlW1wiZXh0ZW5kc1wiXT10W1wiZXh0ZW5kc1wiXSksX1t0LnRhZ05hbWVdPWRvY3VtZW50LnJlZ2lzdGVyRWxlbWVudCh0LnRhZ05hbWUsZSksX1t0LnRhZ05hbWVdfSxDLmV4dGVuZD1mdW5jdGlvbih0LGUpe3ZhciBuPV9bdF0saT17fSxzPU9iamVjdC5jcmVhdGUoSFRNTEVsZW1lbnQucHJvdG90eXBlKTtyZXR1cm4gby5jYWxsKHMsZSkscy5jcmVhdGVkQ2FsbGJhY2s9ZnVuY3Rpb24oKXtuLnByb3RvdHlwZS5jcmVhdGVkQ2FsbGJhY2suYXBwbHkodGhpcyxhcmd1bWVudHMpLGUub25DcmVhdGUmJmUub25DcmVhdGUuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxzLmF0dGFjaGVkQ2FsbGJhY2s9ZnVuY3Rpb24oKXtuLnByb3RvdHlwZS5hdHRhY2hlZENhbGxiYWNrLmFwcGx5KHRoaXMsYXJndW1lbnRzKSxlLm9uQXR0YWNoJiZlLm9uQXR0YWNoLmFwcGx5KHRoaXMsYXJndW1lbnRzKSxyLmNhbGwodGhpcyxlLmV2ZW50cyl9LHMuZGV0YWNoZWRDYWxsYmFjaz1mdW5jdGlvbigpe24ucHJvdG90eXBlLmRldGFjaGVkQ2FsbGJhY2suYXBwbHkodGhpcyxhcmd1bWVudHMpLGUub25EZXRhY2gmJmUub25EZXRhY2guYXBwbHkodGhpcyxhcmd1bWVudHMpfSxzLmF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFjaz1mdW5jdGlvbih0LGkscil7bi5wcm90b3R5cGUuYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrLmFwcGx5KHRoaXMsYXJndW1lbnRzKSxlLm9uQXR0cmlidXRlc0NoYW5nZSYmZS5vbkF0dHJpYnV0ZXNDaGFuZ2VbdF0uYXBwbHkodGhpcyxbaSxyXSl9LGkucHJvdG90eXBlPXMsZG9jdW1lbnQucmVnaXN0ZXJFbGVtZW50KGUudGFnTmFtZSxpKX07dmFyIHc9e30seD17fSxFPWZ1bmN0aW9uKCl7fTtFLnByb3RvdHlwZS5zdHJpbmdpZnk9ZnVuY3Rpb24odCl7dmFyIGU9XCJcIjtmb3IodmFyIG4gaW4gdCl7ZSs9bitcIntcIjt2YXIgaT10W25dO2Zvcih2YXIgciBpbiBpKXt2YXIgbz1pW3JdO2UrPXIrXCI6XCIrbytcIjtcIn1lPWUuc2xpY2UoMCxlLmxlbmd0aC0xKSxlKz1cIn1cIn1yZXR1cm4gZX0sRS5wcm90b3R5cGUuY3JlYXRlU3R5bGVUYWc9ZnVuY3Rpb24odCl7dmFyIGU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInN0eWxlXCIpO3JldHVybiB0PXRoaXMuc3RyaW5naWZ5KHQpLGUuaW5uZXJUZXh0PXQsZX0sRS5wcm90b3R5cGUucmVnaXN0ZXJNaXhpbnM9ZnVuY3Rpb24odCxlKXt3W3RdPWV9LEUucHJvdG90eXBlLnJlZ2lzdGVyVmFyaWFibGVzPWZ1bmN0aW9uKHQsZSl7eFt0XT1lfSxFLnByb3RvdHlwZS5nZXRWYXJpYWJsZT1mdW5jdGlvbih0KXtyZXR1cm4geFt0XT94W3RdOnZvaWQgY29uc29sZS5lcnJvcihcIlZhcmlhYmxlIFwiK3QrXCIgZG9lcyBub3QgZXhpc3QuXCIpfSxFLnByb3RvdHlwZS50b0hleD1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKHQpe3ZhciBlPXQudG9TdHJpbmcoMTYpO3JldHVybiAxPT1lLmxlbmd0aD9cIjBcIitlOmV9cmV0dXJuIHQ9dC5yZXBsYWNlKFwiIFwiLFwiXCIpLnNwbGl0KFwiLFwiKSxcIiNcIitlKHRbMF0pK2UodFsxXSkrZSh0WzJdKX0sRS5wcm90b3R5cGUudG9SR0I9ZnVuY3Rpb24odCl7dmFyIGU9L14jPyhbYS1mXFxkXXsyfSkoW2EtZlxcZF17Mn0pKFthLWZcXGRdezJ9KSQvaS5leGVjKHQpO3JldHVybiBlP1wicmdiKFwiK1twYXJzZUludChlWzFdLDE2KSxwYXJzZUludChlWzJdLDE2KSxwYXJzZUludChlWzNdLDE2KV0uam9pbihcIixcIikrXCIpXCI6bnVsbH0sRS5wcm90b3R5cGUudG9SR0JhPWZ1bmN0aW9uKHQsZSl7dmFyIG49L14jPyhbYS1mXFxkXXsyfSkoW2EtZlxcZF17Mn0pKFthLWZcXGRdezJ9KSQvaS5leGVjKHQpO3JldHVybiBuP1wicmdiYShcIitbcGFyc2VJbnQoblsxXSwxNikscGFyc2VJbnQoblsyXSwxNikscGFyc2VJbnQoblszXSwxNiksZV0uam9pbihcIixcIikrXCIpXCI6bnVsbH0sRS5wcm90b3R5cGUuZ2V0TWl4aW5zPWZ1bmN0aW9uKHQpe3JldHVybiB3W3RdP3dbdF06dm9pZCBjb25zb2xlLmVycm9yKFwiTWl4aW4gXCIrdCtcIiBkb2VzIG5vdCBleGlzdC5cIil9O3ZhciBrPXt9LEE9ZnVuY3Rpb24oKXt9O0EucHJvdG90eXBlW1wiZXhwb3J0XCJdPWZ1bmN0aW9uKHQsZSl7aWYoXCJzdHJpbmdcIiE9dHlwZW9mIHQpdGhyb3cgbmV3IEVycm9yKFwiTW9kdWxlIG5hbWUgaXMgbm90IGEgc3RyaW5nLlwiKTtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiBlKXRocm93IG5ldyBFcnJvcihcIk1vZHVsZSBpcyBub3QgYSBmdW5jdGlvbi5cIik7a1t0XT1mdW5jdGlvbih0KXt0KGUoKSl9fSxBLnByb3RvdHlwZVtcImltcG9ydFwiXT1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKHIscyl7dmFyIGE9dFtyXTtpZihcInN0cmluZ1wiIT10eXBlb2Ygcil0aHJvdyBuZXcgRXJyb3IoXCJNb2R1bGUgbmFtZSBpcyBub3QgYSBzdHJpbmcuXCIpO2lmKFwic3RyaW5nXCIhPXR5cGVvZiBhKXRocm93IG5ldyBFcnJvcihcIlVSTCBpcyBub3QgYSBzdHJpbmcuXCIpO3ZhciB1PWtbcl07aWYodSlzLnJlc29sdmUodSgpKTtlbHNle3ZhciBjPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzY3JpcHRcIik7Yy50eXBlPVwidGV4dC9qYXZhc2NyaXB0XCIsYy5zcmM9YSxjLm9ubG9hZD1mdW5jdGlvbigpe3ZhciB0PWwoKTtjb25zb2xlLmxvZyhcIkxvYWRpbmcgXCIrcitcIi4uLlwiKSx0LnByb21pc2UudGhlbihmdW5jdGlvbih0KXtvW3JdPXQsbisrLDA9PT1pLmxlbmd0aD9zLnJlc29sdmUobyk6ZShpLnBvcCgpLHMpfSksYy5yZW1vdmUoKSxrW3JdKHQucmVzb2x2ZSl9LmJpbmQodGhpcyxyKSxkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGMpfX12YXIgbj0wLGk9T2JqZWN0LmtleXModCkscj1sKCksbz17fTtyZXR1cm4gZShpLnBvcCgpLHIpLHIucHJvbWlzZS5hbmQ9e30sci5wcm9taXNlLmFuZFtcImV4cG9ydFwiXT1mdW5jdGlvbih0LGUpe2tbdF09ZnVuY3Rpb24obil7ci5wcm9taXNlLnRoZW4oZnVuY3Rpb24obil7cmV0dXJuIGtbdF09ZS5iaW5kKHRoaXMsbiksZS5jYWxsKHRoaXMsbil9LmJpbmQodGhpcykpLmRvbmUobil9fS5iaW5kKHRoaXMpLHIucHJvbWlzZS5hbmRbXCJpbXBvcnRcIl09ZnVuY3Rpb24odCl7cmV0dXJuIHIucHJvbWlzZS50aGVuKHRoaXNbXCJpbXBvcnRcIl0uYmluZCh0aGlzLHQpKX0uYmluZCh0aGlzKSxyLnByb21pc2V9O3ZhciBxPXkuZXh0ZW5kKHthamF4OmZ1bmN0aW9uKGUpe2Z1bmN0aW9uIG4odCl7cmV0dXJuXCJERUxFVEVcIj09PWUudHlwZS50b1VwcGVyQ2FzZSgpP0FycmF5LmlzQXJyYXkodCk/dC5mb3JFYWNoKGZ1bmN0aW9uKHQpe3RoaXMudW5zZXQodFtlLmluZGV4QnldLHQpfS5iaW5kKHRoaXMpKTpcIm9iamVjdFwiPT10eXBlb2YgdCYmdGhpcy51bnNldCh0W2UuaW5kZXhCeV0sdCk6QXJyYXkuaXNBcnJheSh0KT90LmZvckVhY2goZnVuY3Rpb24odCl7dGhpcy5zZXQodFtlLmluZGV4QnldLHQpfS5iaW5kKHRoaXMpKTpcIm9iamVjdFwiPT10eXBlb2YgdCYmdGhpcy5zZXQodFtlLmluZGV4QnldLHQpLHR9ZnVuY3Rpb24gaSh0KXtyZXR1cm4gZS5wYXJzZT9lLnBhcnNlKHQpOnRoaXMucGFyc2UodCl9aWYoIWUudXJsKXRocm93IG5ldyBFcnJvcihcIlVybCBpcyByZXF1aXJlZC5cIik7aWYoIWUudHlwZSl0aHJvdyBuZXcgRXJyb3IoXCJSZXF1ZXN0IHR5cGUgaXMgcmVxdWlyZWQuXCIpO3JldHVybiBlLmNvbnRlbnRUeXBlPWUuY29udGVudFR5cGV8fFwiYXBwbGljYXRpb24vanNvblwiLGUuZW5jb2RlPWUuZW5jb2RlfHxudWxsLGUucGF5bG9hZD1lLnBheWxvYWR8fG51bGwsZS5pbmRleEJ5PWUuaW5kZXhCeXx8XCJpZFwiLHQoZSkudGhlbihpLmJpbmQodGhpcykpLnRoZW4obi5iaW5kKHRoaXMpKX0scGFyc2U6ZnVuY3Rpb24odCl7cmV0dXJuIEpTT04ucGFyc2UodCl9fSksQj17fSxqPWZ1bmN0aW9uKCl7fTtqLnByb3RvdHlwZS5yZWdpc3Rlcj1mdW5jdGlvbih0KXtpZihCW3RdKXRocm93IG5ldyBFcnJvcihcIlJlc291cmNlIFwiK3QrXCIgYWxyZWFkeSBleGlzdC5cIik7cmV0dXJuIEJbdF09bmV3IHEsQlt0XX0sai5wcm90b3R5cGUuZ2V0PWZ1bmN0aW9uKHQpe3JldHVybiBCW3RdP0JbdF06dGhpcy5yZWdpc3Rlcih0KX07dmFyIE49ZnVuY3Rpb24oKXt9O04ucHJvdG90eXBlLmNyZWF0ZVRlbXBsYXRlPWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBTfTt2YXIgUz1mdW5jdGlvbigpe3RoaXMuX2N1cnJlbnRTdGF0ZT1bXSx0aGlzLl9xdWV1ZT1bXSx0aGlzLl9jb25kaXRpb25hbD12b2lkIDAsdGhpcy5fc3RhdGU9dm9pZCAwLHRoaXMuX2xvb3A9dm9pZCAwLHRoaXMuX3N0YXJ0PXZvaWQgMH07Uy5wcm90b3R5cGUuY3JlYXRlPWZ1bmN0aW9uKHQpe3Q9dSh0KTt2YXIgZT1mdW5jdGlvbigpe3ZhciBlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQodFswXSk7XCIuXCI9PT10WzFdP2UuY2xhc3NOYW1lPXRbMl06XCIjXCI9PT10WzFdJiYoZS5pZD10WzJdKSx0aGlzLl9jdXJyZW50U3RhdGUucHVzaChlKX0uYmluZCh0aGlzKTtyZXR1cm4gdGhpcy5fcXVldWUucHVzaCh7dHlwZTpcIm9wZW5cIixmbjplfSksdGhpc30sUy5wcm90b3R5cGUuYWRkQ2xhc3M9ZnVuY3Rpb24odCl7dmFyIGU9ZnVuY3Rpb24oZSl7dmFyIG49cy5jYWxsKHRoaXMpO3Q9YyhlLHQpO3ZhciBpPW4uY2xhc3NOYW1lLmxlbmd0aD4wP1wiIFwiOlwiXCI7YShuLHQpfHwobi5jbGFzc05hbWUrPWkrdCl9LmJpbmQodGhpcyk7cmV0dXJuIHRoaXMuX3F1ZXVlLnB1c2goe3R5cGU6XCJhZGRDbGFzc1wiLGZuOmV9KSx0aGlzfSxTLnByb3RvdHlwZS50ZXh0PWZ1bmN0aW9uKHQpe3ZhciBlPWZ1bmN0aW9uKGUpe3ZhciBuPXMuY2FsbCh0aGlzKTtuLnRleHRDb250ZW50PWMoZSx0KX0uYmluZCh0aGlzKTtyZXR1cm4gdGhpcy5fcXVldWUucHVzaCh7dHlwZTpcInRleHRcIixmbjplfSksdGhpc30sUy5wcm90b3R5cGUuYXR0cj1mdW5jdGlvbih0LGUpe3ZhciBuPWZ1bmN0aW9uKG4pe3ZhciBpPXMuY2FsbCh0aGlzKTtpLnNldEF0dHJpYnV0ZShjKG4sdCksYyhuLGUpKX0uYmluZCh0aGlzKTtyZXR1cm4gdGhpcy5fcXVldWUucHVzaCh7dHlwZTpcImF0dHJcIixmbjpufSksdGhpc30sUy5wcm90b3R5cGUuc3R5bGU9ZnVuY3Rpb24odCxlKXt2YXIgbj1mdW5jdGlvbihuKXt2YXIgaT1zLmNhbGwodGhpcyk7aS5zdHlsZVtjKG4sdCldPWMobixlKX0uYmluZCh0aGlzKTtyZXR1cm4gdGhpcy5fcXVldWUucHVzaCh7dHlwZTpcInN0eWxlXCIsZm46bn0pLHRoaXN9LFMucHJvdG90eXBlLnJlbW92ZUNsYXNzPWZ1bmN0aW9uKHQpe3ZhciBlPWZ1bmN0aW9uKGUpe3ZhciBuPXMuY2FsbCh0aGlzKTtpZih0PWMoZSx0KSxhKG4sdCkpe3ZhciBpPW5ldyBSZWdFeHAoXCIoXFxcXHN8XilcIit0K1wiKFxcXFxzfCQpXCIpO24uY2xhc3NOYW1lPW4uY2xhc3NOYW1lLnJlcGxhY2UoaSxcIiBcIil9fS5iaW5kKHRoaXMpO3JldHVybiB0aGlzLl9xdWV1ZS5wdXNoKHt0eXBlOlwicmVtb3ZlQ2xhc3NcIixmbjplfSksdGhpc30sUy5wcm90b3R5cGUuYXBwZW5kPWZ1bmN0aW9uKCl7dmFyIHQ9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5fY3VycmVudFN0YXRlLnBvcCgpO2lmKDA9PT10aGlzLl9jdXJyZW50U3RhdGUubGVuZ3RoKXRoaXMucHJldmlvdXNGcmFnbWVudC5hcHBlbmRDaGlsZChlKTtlbHNle3ZhciBuPXMuY2FsbCh0aGlzKTtuLmFwcGVuZENoaWxkKGUpfX0uYmluZCh0aGlzKTtyZXR1cm4gdGhpcy5fcXVldWUucHVzaCh7dHlwZTpcImNsb3NlXCIsZm46dH0pLHRoaXN9LFMucHJvdG90eXBlLmFwcGVuZExhc3Q9ZnVuY3Rpb24oKXt2YXIgdD1mdW5jdGlvbih0KXt2YXIgZT10aGlzLl9jdXJyZW50U3RhdGUucG9wKCk7dGhpcy5wcmV2aW91c0ZyYWdtZW50LmFwcGVuZENoaWxkKGUpfS5iaW5kKHRoaXMpO3JldHVybiB0aGlzLl9xdWV1ZS5wdXNoKHt0eXBlOlwiZW5kXCIsZm46dH0pLHRoaXN9LFMucHJvdG90eXBlW1wiaWZcIl09ZnVuY3Rpb24odCl7dmFyIGU9ZnVuY3Rpb24oZSl7dGhpcy5fc3RhdGU9XCJjb25kaXRpb25hbFwiLHQ9YyhlLHQpLHRoaXMuX2NvbmRpdGlvbmFsPSEhdH0uYmluZCh0aGlzKTtyZXR1cm4gdGhpcy5fcXVldWUucHVzaCh7dHlwZTpcImlmXCIsZm46ZX0pLHRoaXN9LFMucHJvdG90eXBlW1wiZWxzZVwiXT1mdW5jdGlvbigpe3ZhciB0PWZ1bmN0aW9uKHQpe3RoaXMuX2NvbmRpdGlvbmFsPSF0aGlzLl9jb25kaXRpb25hbH0uYmluZCh0aGlzKTtyZXR1cm4gdGhpcy5fcXVldWUucHVzaCh7dHlwZTpcImVsc2VcIixmbjp0fSksdGhpc30sUy5wcm90b3R5cGUuZWFjaD1mdW5jdGlvbih0KXt2YXIgZT1mdW5jdGlvbihlLG4pe3RoaXMuX2xvb3A9YyhlLHQpLHRoaXMuX3N0YXRlPVwibG9vcFwiLHRoaXMuX3N0YXJ0PW59LmJpbmQodGhpcyk7cmV0dXJuIHRoaXMuX3F1ZXVlLnB1c2goe3R5cGU6XCJlYWNoXCIsZm46ZX0pLHRoaXN9LFMucHJvdG90eXBlLmRvbmU9ZnVuY3Rpb24oKXt2YXIgdD1mdW5jdGlvbih0LGUpe3RoaXMuX2NvbmRpdGlvbmFsPXZvaWQgMCx0aGlzLl9zdGF0ZT12b2lkIDB9LmJpbmQodGhpcyk7cmV0dXJuIHRoaXMuX3F1ZXVlLnB1c2goe3R5cGU6XCJkb25lXCIsZm46dH0pLHRoaXN9LFMucHJvdG90eXBlLnJlbmRlcj1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5wcmV2aW91c0ZyYWdtZW50PWRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSx0aGlzLl9xdWV1ZS5mb3JFYWNoKGZ1bmN0aW9uKGUsbil7c3dpdGNoKHRoaXMuX3N0YXRlKXtjYXNlXCJjb25kaXRpb25hbFwiOih0aGlzLl9jb25kaXRpb25hbHx8XCJlbHNlXCI9PT1lLnR5cGV8fFwiZG9uZVwiPT09ZS50eXBlKSYmZS5mbih0LG4pO2JyZWFrO2Nhc2VcImxvb3BcIjpcImRvbmVcIj09PWUudHlwZSYmKHRoaXMuX2xvb3AuZm9yRWFjaChmdW5jdGlvbih0LGUpe2Zvcih2YXIgaT10aGlzLl9zdGFydCsxO24+aTtpKyspe3ZhciByPXRoaXMuX3F1ZXVlW2ldO3IuZm4odCxlKX19LmJpbmQodGhpcykpLGUuZm4odCxuKSk7YnJlYWs7ZGVmYXVsdDplLmZuKHQsbil9fS5iaW5kKHRoaXMpKSx0aGlzLnByZXZpb3VzRnJhZ21lbnR9O3ZhciBSPW5ldyBkLFQ9e0ZhY3Rvcnk6eSxTZXJ2aWNlOmcsQ29tcG9uZW50OkMsVm93OmwsU3R5bGl6ZXI6bmV3IEUsUmVuZGVyZXI6bmV3IE4sTW9kdWxlOm5ldyBBLFJlc291cmNlOm5ldyBqfTtULnJlZ2lzdGVyR2xvYmFsRXZlbnRCdXM9ZnVuY3Rpb24odCl7cmV0dXJuIFIucmVnaXN0ZXIodCl9LG1vZHVsZSYmbW9kdWxlLmV4cG9ydHM/bW9kdWxlLmV4cG9ydHM9VDp3aW5kb3cuVHJpbz1UfSgpOyIsIndpbmRvdy5UcmlvID0gcmVxdWlyZSgndHJpbycpOyJdfQ==
